{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/flight380-Mar12-master/node_modules/next/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"D:/flight380-Mar12-master/node_modules/next/node_modules/@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:/flight380-Mar12-master/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"D:/flight380-Mar12-master/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"D:/flight380-Mar12-master/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\"));\n\nvar _qs = _interopRequireDefault(require(\"qs\"));\n\nvar AuthenticationModel = /*#__PURE__*/function () {\n  function AuthenticationModel(params) {\n    (0, _classCallCheck2[\"default\"])(this, AuthenticationModel);\n    this.secret = params.secret;\n    this.apiEndPoint = params.apiEndPoint;\n  }\n\n  (0, _createClass2[\"default\"])(AuthenticationModel, [{\n    key: \"readRequest\",\n    value: function () {\n      var _readRequest = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(getFlights) {\n        var parameters;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                parameters = {\n                  method: 'POST',\n                  headers: {\n                    'content-type': 'application/x-www-form-urlencoded',\n                    authorization: \"Basic \".concat(this.secret)\n                  },\n                  body: _qs[\"default\"].stringify({\n                    grant_type: 'client_credentials'\n                  })\n                };\n                _context.next = 4;\n                return fetch(\"\".concat(this.apiEndPoint, \"/v2/auth/token\"), parameters).then(function (res) {\n                  return res.json();\n                }).then(function (json) {\n                  return getFlights(json.access_token);\n                });\n\n              case 4:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(\"Authentication response error \".concat(_context.t0.statusCode));\n                console.log(JSON.parse(_context.t0.error));\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }));\n\n      function readRequest(_x) {\n        return _readRequest.apply(this, arguments);\n      }\n\n      return readRequest;\n    }()\n  }, {\n    key: \"accessToken\",\n    get: function get() {\n      return this.response.access_token;\n    }\n  }]);\n  return AuthenticationModel;\n}();\n\nmodule.exports = AuthenticationModel;","map":{"version":3,"sources":["D:/flight380-Mar12-master/redux/services/authentication_model.js"],"names":["AuthenticationModel","params","secret","apiEndPoint","getFlights","parameters","method","headers","authorization","body","qs","stringify","grant_type","fetch","then","res","json","access_token","console","log","statusCode","JSON","parse","error","response","module","exports"],"mappings":";;;;;;;;;;;;AAAA;;IAEMA,mB;AACJ,+BAAYC,MAAZ,EAAoB;AAAA;AAClB,SAAKC,MAAL,GAAcD,MAAM,CAACC,MAArB;AACA,SAAKC,WAAL,GAAmBF,MAAM,CAACE,WAA1B;AACD;;;;;wHAMiBC,U;;;;;;;AAERC,gBAAAA,U,GAAa;AACjBC,kBAAAA,MAAM,EAAE,MADS;AAEjBC,kBAAAA,OAAO,EAAE;AACP,oCAAgB,mCADT;AAEPC,oBAAAA,aAAa,kBAAW,KAAKN,MAAhB;AAFN,mBAFQ;AAMjBO,kBAAAA,IAAI,EAAEC,eAAGC,SAAH,CAAa;AACjBC,oBAAAA,UAAU,EAAE;AADK,mBAAb;AANW,iB;;uBAUNC,KAAK,WAAI,KAAKV,WAAT,qBAAsCE,UAAtC,CAAL,CACVS,IADU,CACL,UAACC,GAAD;AAAA,yBAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,iBADK,EAEVF,IAFU,CAEL,UAACE,IAAD,EAAU;AACd,yBAAOZ,UAAU,CAACY,IAAI,CAACC,YAAN,CAAjB;AACD,iBAJU,C;;;;;;;;AAQbC,gBAAAA,OAAO,CAACC,GAAR,yCAA6C,YAAMC,UAAnD;AACAF,gBAAAA,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACC,KAAL,CAAW,YAAMC,KAAjB,CAAZ;;;;;;;;;;;;;;;;;;wBAzBc;AAChB,aAAO,KAAKC,QAAL,CAAcP,YAArB;AACD;;;;;AA4BHQ,MAAM,CAACC,OAAP,GAAiB1B,mBAAjB","sourcesContent":["import qs from 'qs'\n\nclass AuthenticationModel {\n  constructor(params) {\n    this.secret = params.secret\n    this.apiEndPoint = params.apiEndPoint\n  }\n\n  get accessToken() {\n    return this.response.access_token\n  }\n\n  async readRequest(getFlights) {\n    try {\n      const parameters = {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/x-www-form-urlencoded',\n          authorization: `Basic ${this.secret}`,\n        },\n        body: qs.stringify({\n          grant_type: 'client_credentials',\n        }),\n      }\n      return await fetch(`${this.apiEndPoint}/v2/auth/token`, parameters)\n        .then((res) => res.json())\n        .then((json) => {\n          return getFlights(json.access_token)\n        })\n\n      // this.response = JSON.parse(response)\n    } catch (error) {\n      console.log(`Authentication response error ${error.statusCode}`)\n      console.log(JSON.parse(error.error))\n    }\n  }\n}\n\nmodule.exports = AuthenticationModel\n"]},"metadata":{},"sourceType":"script"}